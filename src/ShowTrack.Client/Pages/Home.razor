@page "/"
@using ShowTrack.Contracts.Dtos
@using ShowTrack.Client.Services

@inject IShowsService ShowsService

<PageTitle>Home</PageTitle>

<div>
    <RadzenDataList Data="@_shows" Count="@_showsCount" TItem="ReadShowDto" PageSize="5" PagerHorizontalAlign="HorizontalAlign.Left">
        <Template Context="show">
            <RadzenCard Style="width: 100%; padding: 0;">
                <RadzenRow Gap="0">
                    <RadzenColumn Size="12" SizeLG="2" Class="rz-p-4 show-title">
                        <RadzenText TextStyle="TextStyle.H6" TagName="TagName.H5" class="rz-color-secondary">@(show.Title)</RadzenText>
                    </RadzenColumn>

                    <RadzenColumn Size="12" SizeLG="8" Class="rz-p-4">
                        <RadzenRow Gap="0">
                            <RadzenColumn Size="12" SizeMD="6" SizeLG="1" Style="padding-right:80px">
                                <RadzenText TextStyle="TextStyle.H6" TagName="TagName.H5" Class="rz-mb-0">Season</RadzenText>
                                <RadzenText TextStyle="TextStyle.Body2">@(show.CurrentSeason)</RadzenText>
                            </RadzenColumn>
                            <RadzenColumn Size="12" SizeMD="6" SizeLG="3">
                                <RadzenText TextStyle="TextStyle.H6" TagName="TagName.H5" Class="rz-mb-0">Next Season On</RadzenText>
                                <RadzenText TextStyle="TextStyle.Body2">@(show.Schedule?.ReleaseDate.ToString("yyyy-MM-dd") ?? "-")</RadzenText>
                            </RadzenColumn>
                            <RadzenColumn Size="12" SizeMD="6" SizeLG="4">
                                <RadzenText TextStyle="TextStyle.H6" TagName="TagName.H5" Class="rz-mb-0">State</RadzenText>
                                <RadzenText TextStyle="TextStyle.Body2">@(show.IsEnded ? "ended" : "on-going")</RadzenText>
                            </RadzenColumn>
                        </RadzenRow>
                    </RadzenColumn>
                    <RadzenColumn Size="12" SizeLG="2" Class="rz-p-4">
                        <RadzenButton Text="Schedule" Style="width: 100%" />
                    </RadzenColumn>
                </RadzenRow>
            </RadzenCard>
        </Template>
    </RadzenDataList>
</div>

@code
{
    private IList<ReadShowDto>? _shows;
    private int _showsCount => _shows?.Count ?? 0;

    protected override async Task OnInitializedAsync()
    {
        _shows = await ShowsService.GetAllShows();
    }
}
